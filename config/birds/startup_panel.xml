<?xml version="1.0" encoding="UTF-8"?>
<panel>

  <row>
      <box title="Task List" desccol="1" valcol="2">
		<sql><![CDATA[Select name from workbench]]></sql>
      </box>
      <box title="Pre-Catalog Works Benches" desccol="1" valcol="2">
		<sql><![CDATA[Select name from workbench]]></sql>
      </box>
  </row>

   <row>
      <box title="Loans">
        <item title="Items On Loan">
            <sql><statement><![CDATA[select count(loanphysicalobjectid) AS ItemsOnLoanCount from loanphysicalobject as lpo inner join loan on loan.loanid = lpo.loanid where loan.IsGift = false and quantityresolved < quantity and (IsClosed = false or IsClosed is null)]]></statement></sql>
            <link>ListOnLoan</link>
        </item>
        <item title="Overdue Loans">
            <sql><statement><![CDATA[select count(loanid) as OpenLoanCount from loan where loanid in (select loanid from loan where (not (currentduedate is null)) and loan.IsGift = false and (IsClosed = false or IsClosed is null) and datediff(CURDATE(), currentduedate) > 0)]]></statement></sql>
            <link>OverdueLoansList</link>
        </item>
        <item title="Open Loans">
            <sql><statement><![CDATA[select count(loanid) as OpenLoanCount from loan where loan.IsGift = false and (IsClosed = false or IsClosed is null)]]></statement></sql>
            <link>ListOnLoan</link>
        </item>
      </box>
       <box title="Overdue Loans" desccol="1" valcol="5" desctitle="Loan Number" valtitle="Agent">
          <sql><![CDATA[Select distinct loan.LoanNumber as LoanNumber, loan.LoanDate, loan.CurrentDueDate, agent.FirstName, agent.LastName, loan.loanid, loan.OriginalDueDate, loanphysicalobject.Quantity, loanphysicalobject.DescriptionOfMaterial, address.Address, address.City, address.State, address.Country From loan Inner Join loanphysicalobject ON loan.LoanID =  loanphysicalobject.LoanID Inner Join loanagents ON loan.LoanID = loanagents.LoanID Inner Join agent ON loanagents.AgentID = agent.AgentID Inner Join address ON agent.AgentID = address.AgentID where loan.loanid in (select loanid from loan where (not  (currentduedate is null)) and loan.IsGift = false and (IsClosed = false or IsClosed is null) and datediff(CURDATE(), currentduedate) > 0)  group by LoanNumber]]></sql>
		  <link colid="6">OverdueLookup</link>
      </box>
   </row>

    <row>
      <box title="Data Entry">
        <item title="Cataloged in Last 7 Days">
            <sql><statement><![CDATA[select count(*) from collectionobject where DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= TimestampCreated]]></statement></sql>
            <link>CatalogedLast7DaysDetail</link>
        </item>
        <item title="Cataloged in Last 30 Days">
            <sql><statement><![CDATA[select count(*) from collectionobject where DATE_SUB(CURDATE(), INTERVAL 1 MONTH) <= TimestampCreated]]></statement></sql>
            <link>CatalogedLastMonth</link>
        </item>
        <item title="Cataloged in Last Year">
            <sql><statement><![CDATA[select count(*) from collectionobject WHERE DATE_SUB(CURDATE(), INTERVAL 1 YEAR) <= TimestampCreated;]]></statement></sql>
            <link>CatalogedLastYear</link>
        </item>
      </box>
  </row>
  
    
    <!--
    <row>
        <box type="Bar Chart" name="Specimens by Country" colspan="3"/>
    </row>
    -->

    <!-- Director's View -->
    <!--
        <row>
        <box type="Bar Chart" name="Top 5 Species"/>
        <box type="Bar Chart" name="Temporial Periods"/>
    </row>

    <row>
        <box type="Bar Chart" name="Specimens by Country"/>
        <box type="Bar Chart" name="Specimens by Continent"/>
    </row>
    -->
</panel>
